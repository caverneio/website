---
name: "UTEC Classrooms"
description: "Easily find the free classrooms in campus"
url: "https://utec-classrooms.vercel.app/"
last_updated_at: 2023-10-06
published_at: 2023-10-05
status: "published"
---

# UTEC Classrooms

I‚Äôm currently studying in the University of Engineering and Technology (UTEC).

In the campus, there are some places we students can use to study/work outside from our enrolled classes. Such places include the library, cubicles, and classrooms with no events/classes.

<aside>
üí° from now on, we will call events to classes and any booking including manteinance, office hours, and external events that is programmed in a particular time at a particular classroom

</aside>

Outside every classroom there is a printed QR code that links to a Google Drive folder, that contains schedules for the events in every classroom in pdf files.

<ImageGallery
  images={[
    {
      src: "/assets/projects/utec-classrooms/folder-1.png",
      alt: "Screenshot of the folder with the schedules organized by floors",
    },
    {
      src: "/assets/projects/utec-classrooms/folder-2.png",
      alt: "Screenshot of the folder with the schedules of the classrooms in the eight floor",
    },
    {
      src: "/assets/projects/utec-classrooms/folder-3.png",
      alt: "Screenshot of the schedule of the classroom A803. A pdf file.",
    },
  ]}
/>

This folder is updated on the weekends. So, if a new event is created on Monday, student‚Äôs won‚Äôt see it in this folder this week.

So, until last week, there wasn‚Äôt a direct way to find a free classroom in campus. If a student wanted to find a free classroom, he must to check the schedules of several classrooms until he found a free one.

UTEC Classrooms is the solution for this problem.

Whis this web application, student‚Äôs now can see what are the free classrooms at any time.

Here you‚Äôll find some interesting problems I found while building this app and how I was able to solve them. Also, I share the stats of use, where you‚Äôll see a great peak. I‚Äôll explain how the app went trending and the strategies we‚Äôre following to continue growing our user base.

## Data.

I‚Äôve talked with some friends and classmated about the app. And one question they all have in common is ‚Äúhow did you get the data?‚Äù

Data is crucial to this application.

First, let's see hoy many events are in a particular day in a particular classroom.

### What's the amount of data we're dealing with?

The following is a code snippet for getting the events in the classroom A803 on October 3rd, 2023.

Note that in lines 13 and 18 we're creating datetime instances in UTC, which is 5 hours behind from the Lima, Peru datetime.

```js showLineNumbers {13,18,29,30}
import { getXataClient } from "./xata";
let xata = getXataClient();

let events = await xata.db.event
  .select(["*", "course.name"])
  .filter({
    $all: [
      {
        "classroom.name": "A803",
      },
      {
        start: {
          $ge: new Date("2023-10-03T11:00:00Z"),
        },
      },
      {
        end: {
          $le: new Date("2023-10-04T03:00:00Z"),
        },
      },
    ],
  })
  .getAll();

let data = events
  .sort((a, b) => a.start.getHours() - b.start.getHours())
  .map((e) => ({
    name: e.name || e.course?.name,
    start: e.start?.toLocaleTimeString("en-US", { timeZone: "America/Lima" }),
    end: e.end?.toLocaleTimeString("en-US", { timeZone: "America/Lima" }),
  }));

console.log(data);
```

Also note that in lines 29 and 30, we're converting the datetime instances to strings using the `toLocaleTimeString` method. This is because we want to show the time in the LIma timezone.

And the output is:

```json
[
  {
    "name": "Procesamiento y M√©todos de Im√°genes Biom√©dicas",
    "start": "7:00:00 AM",
    "end": "9:00:00 AM"
  },
  {
    "name": "Biotransporte",
    "start": "9:00:00 AM",
    "end": "10:00:00 AM"
  },
  {
    "name": "Laboratorio de Comunicaci√≥n 2",
    "start": "10:00:00 AM",
    "end": "12:00:00 PM"
  },
  {
    "name": "Matem√°ticas Discretas I",
    "start": "12:00:00 PM",
    "end": "2:00:00 PM"
  },
  {
    "name": "Din√°mica y Vibraciones",
    "start": "2:00:00 PM",
    "end": "4:00:00 PM"
  },
  {
    "name": "Qu√≠mica Org√°nica Aplicada",
    "start": "4:00:00 PM",
    "end": "6:00:00 PM"
  },
  {
    "name": "Estrategia Competitiva",
    "start": "6:00:00 PM",
    "end": "8:00:00 PM"
  },
  {
    "name": "Introducci√≥n a Sistemas Embebidos",
    "start": "8:00:00 PM",
    "end": "10:00:00 PM"
  }
]
```

And here's what the data looks like in the UTEC Classrooms app:

<FullImage
  src="/assets/projects/utec-classrooms/2023-10-03_A803.png"
  alt="Screenshot of the app showing the events in the classroom A803 on October 3rd, 2023"
/>

So, we can see that there are 8 events in the classroom A803 on October 3rd, 2023.

Can you guess how many events are in the the whole campus in that day?

Well, they are a lot. 201 to be exact.

And that's just for one day. We need to get the events for the whole week, and then for the whole month.

So, we're dealing with a lot of data.

In order to get the functionality of the app, the best way to deal with this amount of data is to use a database.

And that's what we did.

### How did/do we get the data?

To be honest, my first idea was to build a program to scrape the data from the pdf files in the Google Drive folder.

But, soon, I realized that this was a bad idea. It would be very complex to do it because the pdfs have very different formats.

But when I was checking the pdfs, I realized that they look like they were "printed" from a web page. (I noticed the buttons "Buscar" and "Imprimir").

So, the next couple of days I spent them trying to find the web page that was used to print the pdfs.

And I found it.

<FullImage
  src="/assets/projects/utec-classrooms/reserva-intranet-ss-1.png"
  alt="Screenshot of the app showing the events in the classroom A803 on October 3rd, 2023"
/>
